<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${title}">Statistik</title>
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>

<div th:replace="~{fragments/layout :: navbar}"></div>

<div class="container main-content mt-4">

    <h1 class="mb-4">Statistik Produk</h1>

    <div class="card mb-3 p-3">
        <h5>Total Semua Produk</h5>
        <p class="fs-4" th:text="${totalProducts}">0</p>
    </div>

    <div class="card mb-3 p-3">
        <h5>Jumlah Produk per Kategori</h5>
        <ul>
            <li th:each="entry : ${categoryStats}">
                <strong th:text="${entry.key}">Kategori</strong> :
                <span th:text="${entry.value}">0</span>
            </li>
        </ul>
    </div>

    <div class="card mb-3 p-3">
        <h5>Produk Termahal</h5>
        <p th:text="${mostExpensive != null ? mostExpensive.name + ' - Rp ' + mostExpensive.price : 'Tidak ada'}"></p>
    </div>

    <div class="card mb-3 p-3">
        <h5>Produk Termurah</h5>
        <p th:text="${cheapest != null ? cheapest.name + ' - Rp ' + cheapest.price : 'Tidak ada'}"></p>
    </div>

    <div class="card mb-3 p-3">
        <h5>Rata-rata Harga</h5>
        <p th:text="'Rp ' + ${#numbers.formatDecimal(averagePrice, 0, 'COMMA', 0, 'POINT')}"></p>
    </div>

    <div class="card mb-3 p-3">
        <h5>Jumlah Produk dengan Stok < 20</h5>
        <p th:text="${lowStockCount}"></p>
    </div>

</div>

<div th:replace="~{fragments/layout :: footer}"></div>

</body>
</html>